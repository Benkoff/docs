# User service

Микросервис предоставляет пользователям (другим микросервисам) данные о пользователях курса (студентах). 

Данные о пользователях хранятся в CRM, работа с которой осуществляется через API (т.о. на данный момент слой данных - это CRM). Микросервис предоставляет пользователям ограниченный RESTful API (без возможности удаления записей).


## Технические характеристики:

* JDK 8
* Spring Boot
* JUnit
* Gradle
* логгирование


## Общие положения

* USR-D1 На URI сервиса приходит входящий запрос, его параметры проверяются на корректность и отсутствие любых лишних данных (SQL-injection и т.п.), и выполняется запрос к слою данных (к CRM через API)

* USR-D2 Сервис не хранит у себя данные. Все операции логгируются в соответствии с установленным уровнем логгирования.

* USR-D3 Данные для доступа к API CRM хранятся в отдельном файле в виде (а лучше предложить какой-то другой метод хранения):
    ```
    x2crm_root=<string>
    x2crm_user=<string>
    x2crm_pass=<string>
    ```
* USR-D4 Информация по API X2CRM можно найти [тут](http://wiki.x2crm.com/wiki/REST_API_Reference)

* USR-D5 Пользователю должна предоставляться информация об ошибках при выполнении его запроса (достаточная для понимания и исправления им ошибки) - некорректно заданные параметры, отсутствие обязательного параметра, несоответствие формата параметра, отсутствии данных по его запросу и т.д.

## Список фичей

### USR-F1 Я как пользователь хочу иметь возможность получить список всех пользователей

* USR-F1-D1 Информация о пользователе состоит из uuid, slack, skype и name

* USR-F1-URL

    ```
    url - "/users"
    method - GET
    ```

* USR-F1-REQ

* USR-F1-RSP

    ```
    [
        {
            "uuid" : "...",
            "slack" : "...",
            "skype" : "...",
            "name" : "..."
        },
        ...
    ]    
    ```

### USR-F2 Я как пользователь хочу иметь возможность получить имена пользователей по их uuid

* USR-F2-D1 На входе - массив uuid, на выходе - массив uuid + name.

* USR-F2-URL

    ```
    url - "/users/nameByUuid"
    method - POST
    ```

* USR-F2-REQ

    ```
    {"uuid":["...","...", ...]}"
    ```

* USR-F2-RSP

    ```
    [
        {
            "uuid" : "...",
            "name" : "..."
        },
        ...
    ]
    ```

### USR-F3 Я как пользователь хочу иметь возможность получить uuid пользователей по их slack name.

* USR-F3-D1 Входные данные - массив slackNames, результат - массив uuid + slack.

* USR-F3-URL

    ```
    url - "/users"/uuidBySlack""

    method - POST
    ```

* USR-F3-REQ

    ```
    {"slackNames":["...","...", ...]}"
    ```

* USR-F3-RSP

    ```
    [
        {
            "uuid" : "...",
            "slack" : "..."
        },
        ...
    ]
    ```

### USR-F4 (Перейдет в keeper service !!!) Я как пользователь хочу иметь возможность получить информацию по активным киперам

* USR-F4-D1 В результате получаем массив, состоящий из uuid и description кипера, 
а также uuid пользователя, который назначил кипера 

* USR-F4-URL

    ```
    url - "/users/activeKeepers"
    method - GET
    ```

* USR-F4-REQ

* USR-F4-RSP

    ```
    [
        {
            "uuid" : "...",
            "description" : "...",
            "from" : "..."
        },
        ...
    [
    ```

**[ссылка на старый документ до переноса](https://docs.google.com/document/d/1jfcEau0nIv3gAy8kBsyyAa37PzYUlL2RfjFocVYx5BQ/edit)**
